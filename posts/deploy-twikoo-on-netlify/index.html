<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿ | æµåŠ¨</title><meta name=keywords content="netlify,twikoo,github,vercel,hugo"><meta name=description content="
åœ¨æœ¬ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä¼šä»‹ç»å¦‚ä½•åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿï¼Œå¦‚ä½•æ¥å…¥åˆ°é™æ€åšå®¢Hugoï¼Œä»¥åŠå¦‚ä½•å®ç°Twikooç³»ç»Ÿç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ã€‚
2024å¹´7æœˆ30æ—¥æ›´æ–°ï¼šå› ä¸ºGithubæ¥å£ç­–ç•¥è°ƒæ•´ï¼ŒåŸæœ‰çš„åŒ¿åé€šè¿‡æ¥å£è·å–ç‰ˆæœ¬å·æ–¹æ³•å¤±æ•ˆï¼Œå·²æ›´æ”¹ä¸ºå¸¦tokenæ–¹å¼è¯·æ±‚æ¥å£è·å–ç‰ˆæœ¬å·ï¼Œè¯¦è§workflowé‡ŒGet twikoo versionæ­¥éª¤é…ç½®ã€‚"><meta name=author content="Liudon"><link rel=canonical href=https://liudon.com/posts/deploy-twikoo-on-netlify/><link crossorigin=anonymous href=../../assets/css/stylesheet.c2b4102602461aaea01497bf2f89d3d4096e9005f6ac8a7e60b27e335724b916.css integrity="sha256-wrQQJgJGGq6gFJe/L4nT1AlukAX2rIp+YLJ+M1ckuRY=" rel="preload stylesheet" as=style><link rel=icon href=https://liudon.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://liudon.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://liudon.com/favicon-32x32.png><link rel=apple-touch-icon href=https://liudon.com/apple-touch-icon.png><link rel=mask-icon href=https://liudon.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://liudon.com/posts/deploy-twikoo-on-netlify/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta name=google-site-verification content="rJrwFlRtYvRvSMxmD-zlGY6ozg6aDFMkfavno3ms5Ew"><meta name=google-adsense-account content="ca-pub-4739645989170648"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4739645989170648" crossorigin=anonymous></script><meta property="og:url" content="https://liudon.com/posts/deploy-twikoo-on-netlify/"><meta property="og:site_name" content="æµåŠ¨"><meta property="og:title" content="åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿ"><meta property="og:description" content=" åœ¨æœ¬ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä¼šä»‹ç»å¦‚ä½•åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿï¼Œå¦‚ä½•æ¥å…¥åˆ°é™æ€åšå®¢Hugoï¼Œä»¥åŠå¦‚ä½•å®ç°Twikooç³»ç»Ÿç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ã€‚
2024å¹´7æœˆ30æ—¥æ›´æ–°ï¼šå› ä¸ºGithubæ¥å£ç­–ç•¥è°ƒæ•´ï¼ŒåŸæœ‰çš„åŒ¿åé€šè¿‡æ¥å£è·å–ç‰ˆæœ¬å·æ–¹æ³•å¤±æ•ˆï¼Œå·²æ›´æ”¹ä¸ºå¸¦tokenæ–¹å¼è¯·æ±‚æ¥å£è·å–ç‰ˆæœ¬å·ï¼Œè¯¦è§workflowé‡ŒGet twikoo versionæ­¥éª¤é…ç½®ã€‚"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-19T19:46:32+08:00"><meta property="article:modified_time" content="2023-10-19T19:46:32+08:00"><meta property="article:tag" content="Netlify"><meta property="article:tag" content="Twikoo"><meta property="article:tag" content="Github"><meta property="article:tag" content="Vercel"><meta property="article:tag" content="Hugo"><meta name=twitter:card content="summary"><meta name=twitter:title content="åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿ"><meta name=twitter:description content="
åœ¨æœ¬ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä¼šä»‹ç»å¦‚ä½•åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿï¼Œå¦‚ä½•æ¥å…¥åˆ°é™æ€åšå®¢Hugoï¼Œä»¥åŠå¦‚ä½•å®ç°Twikooç³»ç»Ÿç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ã€‚
2024å¹´7æœˆ30æ—¥æ›´æ–°ï¼šå› ä¸ºGithubæ¥å£ç­–ç•¥è°ƒæ•´ï¼ŒåŸæœ‰çš„åŒ¿åé€šè¿‡æ¥å£è·å–ç‰ˆæœ¬å·æ–¹æ³•å¤±æ•ˆï¼Œå·²æ›´æ”¹ä¸ºå¸¦tokenæ–¹å¼è¯·æ±‚æ¥å£è·å–ç‰ˆæœ¬å·ï¼Œè¯¦è§workflowé‡ŒGet twikoo versionæ­¥éª¤é…ç½®ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ–‡ç« ","item":"https://liudon.com/posts/"},{"@type":"ListItem","position":2,"name":"åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿ","item":"https://liudon.com/posts/deploy-twikoo-on-netlify/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿ","name":"åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿ","description":" åœ¨æœ¬ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä¼šä»‹ç»å¦‚ä½•åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿï¼Œå¦‚ä½•æ¥å…¥åˆ°é™æ€åšå®¢Hugoï¼Œä»¥åŠå¦‚ä½•å®ç°Twikooç³»ç»Ÿç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ã€‚\n2024å¹´7æœˆ30æ—¥æ›´æ–°ï¼šå› ä¸ºGithubæ¥å£ç­–ç•¥è°ƒæ•´ï¼ŒåŸæœ‰çš„åŒ¿åé€šè¿‡æ¥å£è·å–ç‰ˆæœ¬å·æ–¹æ³•å¤±æ•ˆï¼Œå·²æ›´æ”¹ä¸ºå¸¦tokenæ–¹å¼è¯·æ±‚æ¥å£è·å–ç‰ˆæœ¬å·ï¼Œè¯¦è§workflowé‡ŒGet twikoo versionæ­¥éª¤é…ç½®ã€‚\n","keywords":["netlify","twikoo","github","vercel","hugo"],"articleBody":" åœ¨æœ¬ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä¼šä»‹ç»å¦‚ä½•åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿï¼Œå¦‚ä½•æ¥å…¥åˆ°é™æ€åšå®¢Hugoï¼Œä»¥åŠå¦‚ä½•å®ç°Twikooç³»ç»Ÿç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ã€‚\n2024å¹´7æœˆ30æ—¥æ›´æ–°ï¼šå› ä¸ºGithubæ¥å£ç­–ç•¥è°ƒæ•´ï¼ŒåŸæœ‰çš„åŒ¿åé€šè¿‡æ¥å£è·å–ç‰ˆæœ¬å·æ–¹æ³•å¤±æ•ˆï¼Œå·²æ›´æ”¹ä¸ºå¸¦tokenæ–¹å¼è¯·æ±‚æ¥å£è·å–ç‰ˆæœ¬å·ï¼Œè¯¦è§workflowé‡ŒGet twikoo versionæ­¥éª¤é…ç½®ã€‚\nèƒŒæ™¯ åšå®¢ä¹‹å‰é€šè¿‡Verceléƒ¨ç½²äº†Twikooè¯„è®ºç³»ç»Ÿï¼Œä½†æ˜¯æœ€è¿‘å‘ç°åŠ è½½å¾ˆæ…¢ã€‚\nçœ‹Twikooå®˜ç½‘æ–‡æ¡£ï¼ŒNetlifyæ¯”Vercelå›½å†…è®¿é—®ä¼šæ›´ä¼˜ä¸€äº›ï¼Œäºæ˜¯æäº†ä¸€æŠŠè¿ç§»ã€‚\nè¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œç½‘ä¸Šæœäº†ä¸€ç•ªï¼Œå‘ç°Netlifyä¸‹éƒ¨ç½²Twikooçš„ä¿¡æ¯å¾ˆå°‘ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä¼šä»‹ç»æ•´ä¸ªæ“ä½œè¿‡ç¨‹ã€‚\néƒ¨ç½² å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼Œéƒ¨ç½²å³å¯ã€‚\nè¿™é‡Œä¸€å¼€å§‹Forkæˆäº†https://github.com/twikoojs/twikooï¼Œå¯¼è‡´éƒ¨ç½²åè®¿é—®404ã€‚\næ³¨æ„ï¼Œæ­£ç¡®çš„ä»“åº“æ˜¯https://github.com/twikoojs/twikoo-netlifyã€‚\nä½¿ç”¨åŒä¸€ä¸ªMongoDBï¼Œé…ç½®åŸæ¥çš„åœ°å€ï¼Œè¿™æ ·å·²æœ‰çš„è¯„è®ºä¹Ÿä¸ä¼šä¸¢ã€‚\néƒ¨ç½²åï¼Œé€šè¿‡https://comment.liudon.comè®¿é—®ï¼Œè¿”å›200ã€‚\nä½†æ˜¯è®¿é—®https://liudon.comï¼Œæç¤ºCORSè·¨åŸŸé”™è¯¯ï¼Œæœç´¢ä¸€ç•ªç½‘ä¸Šèµ„æ–™ä¹Ÿæ²¡æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ã€‚\nä¸€èˆ¬è·¨åŸŸé”™è¯¯éƒ½æ˜¯è¿”å›å¤´é‡Œç¼ºå°‘è·¨åŸŸç›¸å…³çš„å­—æ®µå¯¼è‡´ï¼Œå› æ­¤å†³å®šä½¿ç”¨Netlifyæ¥æ–°å¢è¿”å›å¤´è§„é¿ã€‚\nä»“åº“ä¸‹æ–°å¢netlify.tomlæ–‡ä»¶ï¼Œé’ˆå¯¹æ ¹ç›®å½•è¿”å›è·¨åŸŸå¤´ï¼Œå†…å®¹å¦‚ä¸‹ã€‚\n[[headers]] # Define which paths this specific [[headers]] block will cover. for = \"/\" [headers.values] Access-Control-Allow-Origin = \"*\" Access-Control-Allow-Headers = \"Content-Type\" Access-Control-Allow-Methods = \"*\" å†æ¬¡åˆ·æ–°é¡µé¢ï¼ŒæŠ¥é”™åˆå˜æˆäº†404ï¼Œä½†æ˜¯ç›´æ¥è®¿é—®https://comment.liudon.comåœ°å€æ˜¯è¿”å›çš„200ã€‚\nç»è¿‡ä¸€ç•ªå®šä½ï¼Œå‘ç°äº†é—®é¢˜æ‰€åœ¨ï¼š\ntwikoo-netlifyåº“æ ¹ç›®å½•åœ°å€æ˜¯é€šè¿‡Locationè·³è½¬åˆ°çš„/.netlify/functions/twikooæ¥å£ï¼Œ/.netlify/functions/twikooæ‰æ˜¯çœŸæ­£å¤„ç†çš„æ¥å£ã€‚\nè€Œvercel-netlifyåº“æ˜¯é€šè¿‡rewriteå°†æ‰€æœ‰è¯·æ±‚è½¬å‘åˆ°äº†/api/indexæ¥å£ã€‚\nåšå®¢é‡Œå†™çš„Twikooç¯å¢ƒidå¡«çš„æ˜¯https://comment.liudon.comï¼Œæ›´æ¢ä¸ºNetlifyåï¼Œéœ€è¦æ›´æ¢ç¯å¢ƒidï¼Œè¡¥é½åé¢çš„/.netlify/functions/twikooã€‚\nå› ä¸ºNetlifyä¹Ÿæ”¯æŒRewriteè½¬å‘ï¼Œæ‰€ä»¥å†³å®šè¿˜æ˜¯é€šè¿‡netlify.tomlæ–‡ä»¶å¢åŠ è½¬å‘é…ç½®è§£å†³ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n[[redirects]] from = \"/\" to = \"/.netlify/functions/twikoo\" status = 200 force = true æ³¨æ„ä¸€å®šä¸è¦æ¼äº†forceå‚æ•°ï¼Œå› ä¸ºæ ¹ç›®å½•æ–‡ä»¶æ˜¯å­˜åœ¨çš„ï¼Œä¸å¸¦è¿™ä¸ªå‚æ•°çš„è¯Rewriteæ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªã€‚\nè¿™ä¸‹è®¿é—®å½»åº•okäº†ã€‚\nä¸è¿‡å¾ˆå¿«åˆå‘ç°å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œçœ‹åˆ°åˆ«äººåšå®¢ä¸ŠTwikooç‰ˆæœ¬å·²ç»æ˜¯1.6.22ï¼Œè‡ªå·±çš„è¿˜æ˜¯1.5.11ã€‚\næœç´¢ä¸€ç•ªåï¼ŒTwikooå·²ç»ç»™å‡ºäº†æ›´æ–°æ“ä½œ:\né’ˆå¯¹ Netlify éƒ¨ç½²çš„æ›´æ–°æ–¹å¼ 1. ç™»å½• Githubï¼Œæ‰¾åˆ°éƒ¨ç½²æ—¶ fork åˆ°è‡ªå·±è´¦å·ä¸‹çš„åä¸º twikoo-netlify çš„ä»“åº“ 2. æ‰“å¼€ package.jsonï¼Œç‚¹å‡»ç¼–è¾‘ 3. å°† \"twikoo-vercel\": \"latest\" å…¶ä¸­çš„ latest ä¿®æ”¹ä¸ºæœ€æ–°ç‰ˆæœ¬å·ã€‚ç‚¹å‡» Commit changes 4. éƒ¨ç½²ä¼šè‡ªåŠ¨è§¦å‘ ä¸è¿‡è¿™æ ·æ“ä½œï¼Œæ¯æ¬¡ç‰ˆæœ¬æ›´æ–°ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨å»æ”¹ä¸€ä¸‹package.jsonæ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œé‡æ–°æ„å»ºã€‚\nå¯¹äºä¸€ä¸ªç¨‹åºå‘˜ï¼Œæˆ‘ä»¬çš„è¿½æ±‚å°±æ˜¯è‡ªåŠ¨åŒ–ã€‚\nè‡ªåŠ¨ç‰ˆæœ¬æ›´æ–° æœåŠ¡ç«¯ç‰ˆæœ¬è‡ªåŠ¨æ›´æ–° è¿™é‡Œåˆ©ç”¨Github Actionså®šæ—¶ä»»åŠ¡ï¼Œé€šè¿‡æ¥å£æ‹‰å–twikooæœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åæ›´æ–°åˆ°package.jsonæ–‡ä»¶ï¼Œä»è€Œå®ç°ç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ã€‚\nåœ¨è‡ªå·±twikoo-netlifyä»“åº“ä¸‹ï¼Œæ–°å¢Actionsï¼Œä»£ç å¦‚ä¸‹ï¼š\n# This is a basic workflow to help you get started with Actions name: CI # Controls when the workflow will run on: # Triggers the workflow on push or pull request events but only for the \"main\" branch push: branches: [ \"main\" ] pull_request: branches: [ \"main\" ] # Allows you to run this workflow manually from the Actions tab workflow_dispatch: schedule: - cron: '0 2 * * *' # æ¯å¤©å®šæ—¶2ç‚¹æ‰§è¡Œä¸€æ¬¡ # A workflow run is made up of one or more jobs that can run sequentially or in parallel jobs: # This workflow contains a single job called \"build\" build: # The type of runner that the job will run on runs-on: ubuntu-latest permissions: contents: write # Steps represent a sequence of tasks that will be executed as part of the job steps: # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it - uses: actions/checkout@v3 # Runs a single command using the runners shell - name: update version env: github_token: ${{ secrets.TOKEN }} run: | response=$(curl -sf -H \"Authorization: token $github_token\" -H \"Accept: application/vnd.github+json\" https://api.github.com/repos/twikoojs/twikoo/releases/latest) version=$(echo $response | jq -r '.tag_name') if [ -n \"$version\" ]; then sed -i \"s/\\\"twikoo-netlify\\\": \\\".*\\\"/\\\"twikoo-netlify\\\": \\\"$version\\\"/\" package.json fi shell: bash # Runs a set of commands using the runners shell - name: Commit changes uses: EndBug/add-and-commit@v9 env: github_token: ${{ secrets.TOKEN }} add: . è¿™é‡Œä¼šæŠŠä¿®æ”¹åçš„package.jsonæ–‡ä»¶æäº¤åˆ°ä»“åº“ï¼Œæ‰€ä»¥éœ€è¦ç”³è¯·ä¸€ä¸ªTokenï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ç”³è¯·ï¼Œç„¶åæ·»åŠ åˆ°ä»“åº“å˜é‡é‡Œã€‚\nåšå®¢å¼•ç”¨ç‰ˆæœ¬è‡ªåŠ¨æ›´æ–° è¿™é‡Œä¸€å¼€å§‹æƒ³åˆ°åœ¨å‰ç«¯å»æŸ¥æœåŠ¡ç«¯æœ€æ–°ç‰ˆæœ¬å·ï¼Œç„¶åå¼•ç”¨å¯¹åº”ç‰ˆæœ¬çš„jsæ–‡ä»¶æ¥å®ç°ã€‚\nä½†æ˜¯è¿™æ ·å°±ä¼šå¯¼è‡´æ¯æ¬¡é¡µé¢åŠ è½½éƒ½è¦å»æŸ¥ä¸€æ¬¡ç‰ˆæœ¬ï¼Œä¼šå¯¼è‡´åŠ è½½æ—¶é—´å˜é•¿ã€‚\nå› æ­¤è¿˜æ˜¯å†³å®šåœ¨æœåŠ¡ç«¯éƒ¨ç½²æ—¶ï¼Œè·å–æœ€æ–°ç‰ˆæœ¬å·æ›´æ–°æœåŠ¡ã€‚\nå¼•ç”¨ç‰ˆæœ¬é…ç½®åŒ– comments.htmlæ–‡ä»¶ä¿®æ”¹ï¼š\n","wordCount":"2232","inLanguage":"en","datePublished":"2023-10-19T19:46:32+08:00","dateModified":"2023-10-19T19:46:32+08:00","author":{"@type":"Person","name":"Liudon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://liudon.com/posts/deploy-twikoo-on-netlify/"},"publisher":{"@type":"Organization","name":"æµåŠ¨","logo":{"@type":"ImageObject","url":"https://liudon.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://liudon.com/ accesskey=h title="æµåŠ¨ (Alt + H)">æµåŠ¨</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://liudon.com/ title=Home><span>Home</span></a></li><li><a href=https://liudon.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://workout.liudon.com title=Workouts><span>Workouts</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://liudon.com/about/ title=About><span>About</span></a></li><li><a href=https://liudon.com/search/ title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿ</h1><div class=post-meta><span title='2023-10-19 19:46:32 +0800 +0800'>2023-10-19</span>&nbsp;Â·&nbsp;5 min&nbsp;Â·&nbsp;2232 words&nbsp;Â·&nbsp;Liudon</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e8%83%8c%e6%99%af aria-label=èƒŒæ™¯>èƒŒæ™¯</a></li><li><a href=#%e9%83%a8%e7%bd%b2 aria-label=éƒ¨ç½²>éƒ¨ç½²</a></li><li><a href=#%e8%87%aa%e5%8a%a8%e7%89%88%e6%9c%ac%e6%9b%b4%e6%96%b0 aria-label=è‡ªåŠ¨ç‰ˆæœ¬æ›´æ–°>è‡ªåŠ¨ç‰ˆæœ¬æ›´æ–°</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><blockquote><p>åœ¨æœ¬ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä¼šä»‹ç»å¦‚ä½•åœ¨Netlifyä¸Šéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿï¼Œå¦‚ä½•æ¥å…¥åˆ°é™æ€åšå®¢Hugoï¼Œä»¥åŠå¦‚ä½•å®ç°Twikooç³»ç»Ÿç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ã€‚</p></blockquote><p><em>2024å¹´7æœˆ30æ—¥æ›´æ–°ï¼šå› ä¸º<a href=https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting>Githubæ¥å£ç­–ç•¥è°ƒæ•´</a>ï¼ŒåŸæœ‰çš„åŒ¿åé€šè¿‡æ¥å£è·å–ç‰ˆæœ¬å·æ–¹æ³•å¤±æ•ˆï¼Œå·²æ›´æ”¹ä¸ºå¸¦tokenæ–¹å¼è¯·æ±‚æ¥å£è·å–ç‰ˆæœ¬å·ï¼Œè¯¦è§workflowé‡ŒGet twikoo versionæ­¥éª¤é…ç½®ã€‚</em></p><h4 id=èƒŒæ™¯>èƒŒæ™¯<a hidden class=anchor aria-hidden=true href=#èƒŒæ™¯>#</a></h4><p>åšå®¢ä¹‹å‰é€šè¿‡<code>Vercel</code>éƒ¨ç½²äº†<code>Twikoo</code>è¯„è®ºç³»ç»Ÿï¼Œä½†æ˜¯æœ€è¿‘å‘ç°åŠ è½½å¾ˆæ…¢ã€‚</p><p>çœ‹<a href=https://twikoo.js.org/backend.html>Twikooå®˜ç½‘æ–‡æ¡£</a>ï¼Œ<code>Netlify</code>æ¯”<code>Vercel</code>å›½å†…è®¿é—®ä¼šæ›´ä¼˜ä¸€äº›ï¼Œäºæ˜¯æäº†ä¸€æŠŠè¿ç§»ã€‚</p><p>è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œç½‘ä¸Šæœäº†ä¸€ç•ªï¼Œå‘ç°<code>Netlify</code>ä¸‹éƒ¨ç½²<code>Twikoo</code>çš„ä¿¡æ¯å¾ˆå°‘ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä¼šä»‹ç»æ•´ä¸ªæ“ä½œè¿‡ç¨‹ã€‚</p><h4 id=éƒ¨ç½²>éƒ¨ç½²<a hidden class=anchor aria-hidden=true href=#éƒ¨ç½²>#</a></h4><p>å‚è€ƒ<a href=https://twikoo.js.org/backend.html#netlify-%E9%83%A8%E7%BD%B2>å®˜ç½‘æ–‡æ¡£</a>ï¼Œéƒ¨ç½²å³å¯ã€‚</p><p>è¿™é‡Œä¸€å¼€å§‹Forkæˆäº†<code>https://github.com/twikoojs/twikoo</code>ï¼Œå¯¼è‡´éƒ¨ç½²åè®¿é—®404ã€‚</p><p>æ³¨æ„ï¼Œæ­£ç¡®çš„ä»“åº“æ˜¯<code>https://github.com/twikoojs/twikoo-netlify</code>ã€‚</p><p><picture><source type=image/avif srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/netlify-3.4f565e5d.png_1080x.avif 1080w" sizes="(min-width: 768px) 1080px, 100vw"><source type=image/webp srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/netlify-3.4f565e5d.png_1080x.webp 1080w" sizes="(min-width: 768px) 1080px, 100vw"><img src=netlify-3.4f565e5d.png width=1080 height=520 alt=Netlifyéƒ¨ç½²Twikoo title loading=lazy></picture></p><p>ä½¿ç”¨åŒä¸€ä¸ª<code>MongoDB</code>ï¼Œé…ç½®åŸæ¥çš„åœ°å€ï¼Œè¿™æ ·å·²æœ‰çš„è¯„è®ºä¹Ÿä¸ä¼šä¸¢ã€‚</p><p>éƒ¨ç½²åï¼Œé€šè¿‡<code>https://comment.liudon.com</code>è®¿é—®ï¼Œè¿”å›200ã€‚</p><p>ä½†æ˜¯è®¿é—®<code>https://liudon.com</code>ï¼Œæç¤º<code>CORSè·¨åŸŸé”™è¯¯</code>ï¼Œæœç´¢ä¸€ç•ªç½‘ä¸Šèµ„æ–™ä¹Ÿæ²¡æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ã€‚</p><p><picture><source type=image/avif srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019190935.png_1080x.avif 1080w" sizes="(min-width: 768px) 1080px, 100vw"><source type=image/webp srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019190935.png_1080x.webp 1080w" sizes="(min-width: 768px) 1080px, 100vw"><img src=20231019190935.png width=1080 height=309 alt=CORSæŠ¥é”™ title loading=lazy></picture></p><p>ä¸€èˆ¬è·¨åŸŸé”™è¯¯éƒ½æ˜¯è¿”å›å¤´é‡Œç¼ºå°‘è·¨åŸŸç›¸å…³çš„å­—æ®µå¯¼è‡´ï¼Œå› æ­¤å†³å®šä½¿ç”¨<code>Netlify</code>æ¥æ–°å¢è¿”å›å¤´è§„é¿ã€‚</p><p>ä»“åº“ä¸‹æ–°å¢<code>netlify.toml</code>æ–‡ä»¶ï¼Œé’ˆå¯¹æ ¹ç›®å½•è¿”å›è·¨åŸŸå¤´ï¼Œå†…å®¹å¦‚ä¸‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>[[headers]]
</span></span><span style=display:flex><span>  # Define which paths this specific [[headers]] block will cover.
</span></span><span style=display:flex><span>  for = &#34;/&#34;
</span></span><span style=display:flex><span>    [headers.values]
</span></span><span style=display:flex><span>    Access-Control-Allow-Origin = &#34;*&#34;
</span></span><span style=display:flex><span>    Access-Control-Allow-Headers = &#34;Content-Type&#34;
</span></span><span style=display:flex><span>    Access-Control-Allow-Methods = &#34;*&#34;
</span></span></code></pre></div><p>å†æ¬¡åˆ·æ–°é¡µé¢ï¼ŒæŠ¥é”™åˆå˜æˆäº†404ï¼Œä½†æ˜¯ç›´æ¥è®¿é—®<code>https://comment.liudon.com</code>åœ°å€æ˜¯è¿”å›çš„200ã€‚</p><p><picture><source type=image/avif srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019191326.png_1080x.avif 1080w" sizes="(min-width: 768px) 1080px, 100vw"><source type=image/webp srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019191326.png_1080x.webp 1080w" sizes="(min-width: 768px) 1080px, 100vw"><img src=20231019191326.png width=1080 height=263 alt=404æŠ¥é”™ title loading=lazy></picture></p><p>ç»è¿‡ä¸€ç•ªå®šä½ï¼Œå‘ç°äº†é—®é¢˜æ‰€åœ¨ï¼š</p><p><code>twikoo-netlify</code>åº“æ ¹ç›®å½•åœ°å€æ˜¯é€šè¿‡<code>Location</code>è·³è½¬åˆ°çš„<code>/.netlify/functions/twikoo</code>æ¥å£ï¼Œ<code>/.netlify/functions/twikoo</code>æ‰æ˜¯çœŸæ­£å¤„ç†çš„æ¥å£ã€‚</p><p><picture><source type=image/avif srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019191522.png_1080x.avif 1080w" sizes="(min-width: 768px) 1080px, 100vw"><source type=image/webp srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019191522.png_1080x.webp 1080w" sizes="(min-width: 768px) 1080px, 100vw"><img src=20231019191522.png width=1080 height=284 alt=twikoo-netlifyæ ¹ç›®å½•è¿”å› title loading=lazy></picture></p><p>è€Œ<code>vercel-netlify</code>åº“æ˜¯é€šè¿‡rewriteå°†æ‰€æœ‰è¯·æ±‚è½¬å‘åˆ°äº†<code>/api/index</code>æ¥å£ã€‚</p><p><picture><source type=image/avif srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019191833.png_1080x.avif 1080w" sizes="(min-width: 768px) 1080px, 100vw"><source type=image/webp srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019191833.png_1080x.webp 1080w" sizes="(min-width: 768px) 1080px, 100vw"><img src=20231019191833.png width=1012 height=442 alt=twikoo-vercelè½¬å‘ title loading=lazy></picture></p><p>åšå®¢é‡Œå†™çš„<code>Twikoo</code>ç¯å¢ƒidå¡«çš„æ˜¯<code>https://comment.liudon.com</code>ï¼Œæ›´æ¢ä¸º<code>Netlify</code>åï¼Œéœ€è¦æ›´æ¢ç¯å¢ƒidï¼Œè¡¥é½åé¢çš„<code>/.netlify/functions/twikoo</code>ã€‚</p><p><picture><source type=image/avif srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019192158.png_1080x.avif 1080w" sizes="(min-width: 768px) 1080px, 100vw"><source type=image/webp srcset="https://liudon.com/posts/deploy-twikoo-on-netlify/20231019192158.png_1080x.webp 1080w" sizes="(min-width: 768px) 1080px, 100vw"><img src=20231019192158.png width=663 height=137 alt=twikooç¯å¢ƒid title loading=lazy></picture></p><p>å› ä¸º<code>Netlify</code>ä¹Ÿæ”¯æŒ<code>Rewrite</code>è½¬å‘ï¼Œæ‰€ä»¥å†³å®šè¿˜æ˜¯é€šè¿‡<code>netlify.toml</code>æ–‡ä»¶å¢åŠ è½¬å‘é…ç½®è§£å†³ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>[[redirects]]
</span></span><span style=display:flex><span>  from = &#34;/&#34;
</span></span><span style=display:flex><span>  to = &#34;/.netlify/functions/twikoo&#34;
</span></span><span style=display:flex><span>  status = 200
</span></span><span style=display:flex><span>  force = true
</span></span></code></pre></div><p>æ³¨æ„ä¸€å®šä¸è¦æ¼äº†<code>force</code>å‚æ•°ï¼Œå› ä¸ºæ ¹ç›®å½•æ–‡ä»¶æ˜¯å­˜åœ¨çš„ï¼Œä¸å¸¦è¿™ä¸ªå‚æ•°çš„è¯<code>Rewrite</code>æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªã€‚</p><p>è¿™ä¸‹è®¿é—®å½»åº•okäº†ã€‚</p><p>ä¸è¿‡å¾ˆå¿«åˆå‘ç°å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œçœ‹åˆ°åˆ«äººåšå®¢ä¸Š<code>Twikoo</code>ç‰ˆæœ¬å·²ç»æ˜¯<code>1.6.22</code>ï¼Œè‡ªå·±çš„è¿˜æ˜¯<code>1.5.11</code>ã€‚</p><p>æœç´¢ä¸€ç•ªåï¼Œ<code>Twikoo</code>å·²ç»ç»™å‡ºäº†æ›´æ–°æ“ä½œ:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>é’ˆå¯¹ Netlify éƒ¨ç½²çš„æ›´æ–°æ–¹å¼
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1. ç™»å½• Githubï¼Œæ‰¾åˆ°éƒ¨ç½²æ—¶ fork åˆ°è‡ªå·±è´¦å·ä¸‹çš„åä¸º twikoo-netlify çš„ä»“åº“
</span></span><span style=display:flex><span>2. æ‰“å¼€ package.jsonï¼Œç‚¹å‡»ç¼–è¾‘
</span></span><span style=display:flex><span>3. å°† &#34;twikoo-vercel&#34;: &#34;latest&#34; å…¶ä¸­çš„ latest ä¿®æ”¹ä¸ºæœ€æ–°ç‰ˆæœ¬å·ã€‚ç‚¹å‡» Commit changes
</span></span><span style=display:flex><span>4. éƒ¨ç½²ä¼šè‡ªåŠ¨è§¦å‘
</span></span></code></pre></div><p>ä¸è¿‡è¿™æ ·æ“ä½œï¼Œæ¯æ¬¡ç‰ˆæœ¬æ›´æ–°ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨å»æ”¹ä¸€ä¸‹<code>package.json</code>æ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œé‡æ–°æ„å»ºã€‚</p><p>å¯¹äºä¸€ä¸ªç¨‹åºå‘˜ï¼Œæˆ‘ä»¬çš„è¿½æ±‚å°±æ˜¯è‡ªåŠ¨åŒ–ã€‚</p><h4 id=è‡ªåŠ¨ç‰ˆæœ¬æ›´æ–°>è‡ªåŠ¨ç‰ˆæœ¬æ›´æ–°<a hidden class=anchor aria-hidden=true href=#è‡ªåŠ¨ç‰ˆæœ¬æ›´æ–°>#</a></h4><ol><li>æœåŠ¡ç«¯ç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°</li></ol><p>è¿™é‡Œåˆ©ç”¨<code>Github Actions</code>å®šæ—¶ä»»åŠ¡ï¼Œé€šè¿‡æ¥å£æ‹‰å–<a href=https://github.com/twikoojs/twikoo/releases>twikoo</a>æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åæ›´æ–°åˆ°<code>package.json</code>æ–‡ä»¶ï¼Œä»è€Œå®ç°ç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ã€‚</p><p>åœ¨è‡ªå·±<code>twikoo-netlify</code>ä»“åº“ä¸‹ï¼Œæ–°å¢<code>Actions</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># This is a basic workflow to help you get started with Actions
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>name: CI
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Controls when the workflow will run
</span></span><span style=display:flex><span>on:
</span></span><span style=display:flex><span>  # Triggers the workflow on push or pull request events but only for the &#34;main&#34; branch
</span></span><span style=display:flex><span>  push:
</span></span><span style=display:flex><span>    branches: [ &#34;main&#34; ]
</span></span><span style=display:flex><span>  pull_request:
</span></span><span style=display:flex><span>    branches: [ &#34;main&#34; ]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  # Allows you to run this workflow manually from the Actions tab
</span></span><span style=display:flex><span>  workflow_dispatch:
</span></span><span style=display:flex><span>  schedule:
</span></span><span style=display:flex><span>    - cron: &#39;0 2 * * *&#39; # æ¯å¤©å®šæ—¶2ç‚¹æ‰§è¡Œä¸€æ¬¡
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># A workflow run is made up of one or more jobs that can run sequentially or in parallel
</span></span><span style=display:flex><span>jobs:
</span></span><span style=display:flex><span>  # This workflow contains a single job called &#34;build&#34;
</span></span><span style=display:flex><span>  build:
</span></span><span style=display:flex><span>    # The type of runner that the job will run on
</span></span><span style=display:flex><span>    runs-on: ubuntu-latest
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    permissions:      
</span></span><span style=display:flex><span>      contents: write
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    # Steps represent a sequence of tasks that will be executed as part of the job
</span></span><span style=display:flex><span>    steps:
</span></span><span style=display:flex><span>      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
</span></span><span style=display:flex><span>      - uses: actions/checkout@v3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      # Runs a single command using the runners shell
</span></span><span style=display:flex><span>      - name: update version
</span></span><span style=display:flex><span>        env:
</span></span><span style=display:flex><span>          github_token: ${{ secrets.TOKEN }}
</span></span><span style=display:flex><span>        run: |
</span></span><span style=display:flex><span>          response=$(curl -sf -H &#34;Authorization: token $github_token&#34; -H &#34;Accept: application/vnd.github+json&#34; https://api.github.com/repos/twikoojs/twikoo/releases/latest)
</span></span><span style=display:flex><span>          version=$(echo $response | jq -r &#39;.tag_name&#39;)
</span></span><span style=display:flex><span>          if [ -n &#34;$version&#34; ]; then
</span></span><span style=display:flex><span>            sed -i &#34;s/\&#34;twikoo-netlify\&#34;: \&#34;.*\&#34;/\&#34;twikoo-netlify\&#34;: \&#34;$version\&#34;/&#34; package.json
</span></span><span style=display:flex><span>          fi
</span></span><span style=display:flex><span>        shell: bash
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>      # Runs a set of commands using the runners shell
</span></span><span style=display:flex><span>      - name: Commit changes
</span></span><span style=display:flex><span>        uses: EndBug/add-and-commit@v9
</span></span><span style=display:flex><span>        env:
</span></span><span style=display:flex><span>          github_token: ${{ secrets.TOKEN }}
</span></span><span style=display:flex><span>          add: .
</span></span></code></pre></div><p>è¿™é‡Œä¼šæŠŠä¿®æ”¹åçš„<code>package.json</code>æ–‡ä»¶æäº¤åˆ°ä»“åº“ï¼Œæ‰€ä»¥éœ€è¦ç”³è¯·ä¸€ä¸ª<code>Token</code>ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¸Šä¸€ç¯‡<a href=https://liudon.com/posts/using-github-actions-to-schedule-weibo-scraping/>æ–‡ç« </a>ç”³è¯·ï¼Œç„¶åæ·»åŠ åˆ°ä»“åº“å˜é‡é‡Œã€‚</p><ol start=2><li>åšå®¢å¼•ç”¨ç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°</li></ol><p>è¿™é‡Œä¸€å¼€å§‹æƒ³åˆ°åœ¨å‰ç«¯å»æŸ¥æœåŠ¡ç«¯æœ€æ–°ç‰ˆæœ¬å·ï¼Œç„¶åå¼•ç”¨å¯¹åº”ç‰ˆæœ¬çš„jsæ–‡ä»¶æ¥å®ç°ã€‚</p><p>ä½†æ˜¯è¿™æ ·å°±ä¼šå¯¼è‡´æ¯æ¬¡é¡µé¢åŠ è½½éƒ½è¦å»æŸ¥ä¸€æ¬¡ç‰ˆæœ¬ï¼Œä¼šå¯¼è‡´åŠ è½½æ—¶é—´å˜é•¿ã€‚</p><p>å› æ­¤è¿˜æ˜¯å†³å®šåœ¨æœåŠ¡ç«¯éƒ¨ç½²æ—¶ï¼Œè·å–æœ€æ–°ç‰ˆæœ¬å·æ›´æ–°æœåŠ¡ã€‚</p><ul><li>å¼•ç”¨ç‰ˆæœ¬é…ç½®åŒ–</li></ul><p><code>comments.html</code>æ–‡ä»¶ä¿®æ”¹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>&lt;script src=&#34;https://cdn.staticfile.org/twikoo/{{ .Site.Params.twikoo.version }}/twikoo.all.min.js&#34;&gt;
</span></span></code></pre></div><p><code>config.tml</code>é…ç½®ä¿®æ”¹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>params:
</span></span><span style=display:flex><span>  env: production # to enable google analytics, opengraph, twitter-cards and schema.
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  ... # å…¶ä»–é…ç½®
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  assets:
</span></span><span style=display:flex><span>    disableHLJS: true # to disable highlight.js
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  twikoo:
</span></span><span style=display:flex><span>    version: 1.5.11 # é…ç½®twikooç‰ˆæœ¬å·
</span></span></code></pre></div><ul><li>è·å–æœ€æ–°ç‰ˆæœ¬å·éƒ¨ç½²</li></ul><p><code>Actions</code>æ–°å¢æ­¥éª¤ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>    - name: Setup Hugo
</span></span><span style=display:flex><span>    uses: peaceiris/actions-hugo@v2
</span></span><span style=display:flex><span>    with:
</span></span><span style=display:flex><span>        hugo-version: &#39;latest&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ####
</span></span><span style=display:flex><span>    - name: Get twikoo version
</span></span><span style=display:flex><span>    id: twikoo
</span></span><span style=display:flex><span>    run: |
</span></span><span style=display:flex><span>        version=$(curl -s https://raw.githubusercontent.com/Liudon/twikoo-netlify/main/package.json | jq -r &#39;.dependencies.&#34;twikoo-netlify&#34;&#39;)
</span></span><span style=display:flex><span>        echo &#34;Twikoo version: $version&#34;
</span></span><span style=display:flex><span>        echo &#34;twikoo_version=$version&#34; &gt;&gt; $GITHUB_OUTPUT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - name: Update config.yml version
</span></span><span style=display:flex><span>    uses: fjogeleit/yaml-update-action@main
</span></span><span style=display:flex><span>    with:
</span></span><span style=display:flex><span>        valueFile: &#39;config.yml&#39;
</span></span><span style=display:flex><span>        propertyPath: &#39;params.twikoo.version&#39;
</span></span><span style=display:flex><span>        value: ${{ steps.twikoo.outputs.twikoo_version }}
</span></span><span style=display:flex><span>        commitChange: true
</span></span><span style=display:flex><span>    ####
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    - name: Build
</span></span><span style=display:flex><span>    run: hugo --gc --minify --cleanDestinationDir 
</span></span></code></pre></div><p><code>####</code>å†…ä»£ç å³ä¸ºè·å–ç‰ˆæœ¬å·ï¼Œæ›´æ–°<code>config.tml</code>ç‰ˆæœ¬å·é€»è¾‘ï¼Œç„¶åå†è¿›è¡Œ<code>hugo</code>éƒ¨ç½²ã€‚</p><p>éœ€è¦å°†<code>https://raw.githubusercontent.com/Liudon/twikoo-netlify/main/package.json</code>è¿™ä¸ªurlé‡Œçš„<code>Liudon/twikoo-netlify</code>æ”¹ä¸ºä½ çš„ä»“åº“åã€‚</p><p>è¿™ä¸‹åé¢<code>Twikoo</code>å®˜æ–¹æ›´æ–°ç‰ˆæœ¬ï¼Œåšå®¢çš„<code>Twikoo</code>ä¹Ÿä¼šè·Ÿç€è‡ªåŠ¨æ›´æ–°ã€‚</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://liudon.com/tags/netlify/>Netlify</a></li><li><a href=https://liudon.com/tags/twikoo/>Twikoo</a></li><li><a href=https://liudon.com/tags/github/>Github</a></li><li><a href=https://liudon.com/tags/vercel/>Vercel</a></li><li><a href=https://liudon.com/tags/hugo/>Hugo</a></li></ul><nav class=paginav><a class=prev href=https://liudon.com/posts/how-to-use-google-indexing-api-to-speed-up-blog-indexing/><span class=title>Â« Prev</span><br><span>ä½¿ç”¨Google Indexing APIåŠ é€Ÿåšå®¢æ”¶å½•</span>
</a><a class=next href=https://liudon.com/posts/using-github-actions-to-schedule-weibo-scraping/><span class=title>Next Â»</span><br><span>åˆ©ç”¨Github Actionså®šæ—¶æŠ“å–å¾®åš</span></a></nav></footer><div><div class=post_ads><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-4739645989170648 data-ad-slot=5019102040 data-ad-format=auto data-full-width-responsive=true></ins><script>window.addEventListener("load",function(){(adsbygoogle=window.adsbygoogle||[]).push({})})</script></div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>ğŸ’¬è¯„è®º</span><hr></div><div id=tcomment></div><script src=https://cdnjs.cloudflare.com/ajax/libs/twikoo/1.6.41/twikoo.all.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script>twikoo.init({envId:"https://comment.liudon.com",el:"#tcomment",lang:"zh-CN",region:"ap-shanghai",path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://liudon.com/>æµåŠ¨</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer style=margin-top:-20px;padding-top:0><span><a href=https://beian.miit.gov.cn target=_blank>äº¬ICPå¤‡13029522å·-2</a></span></footer><script src=//tokinx.github.io/ViewImage/view-image.min.js async></script><script>function initViewImage(){window.ViewImage&&ViewImage.init(".post-content img")}document.readyState==="complete"?initViewImage():window.addEventListener("load",initViewImage)</script><script>const host=window.location.host;host!=="blog.liudon.xyz"&&!host.startsWith("liudon.")&&!host.startsWith("localhost")&&!host.startsWith("127.0.0.1")&&(document.body.innerHTML=['<div style="margin: auto;">',"<h1>å½“å‰é¡µé¢å¹¶éæœ¬äººåšå®¢ï¼Œå³å°†åœ¨2ç§’åè·³è½¬åˆ°æœ¬äººåšå®¢: https://liudon.comã€‚</h1>","<br />","</div>"].join(""),document.body.style=["background-color: white;","color: black;","text-align: center;","font-size: 50px;","width: 100vw;","height: 100vh;","display: flex;"].join(""),setTimeout(()=>{window.location.href="https://liudon.com"},2e3))</script><script>enScroll=!1,enFdl=!1,extCurrent=0[0],filename=0[0],targetText=0[0],splitOrigin=0[0];const lStor=localStorage,sStor=sessionStorage,doc=document,docEl=document.documentElement,docBody=document.body,docLoc=document.location,w=window,s=screen,nav=navigator||{},extensions=["pdf","xls","xlsx","doc","docx","txt","rtf","csv","exe","key","pps","ppt","pptx","7z","pkg","rar","gz","zip","avi","mov","mp4","mpe","mpeg","wmv","mid","midi","mp3","wav","wma"];function a(e,t,n,o){const j="G-G9ZDJQN9E2",r=()=>Math.floor(Math.random()*1e9)+1,c=()=>Math.floor(Date.now()/1e3),F=()=>(sStor._p||(sStor._p=r()),sStor._p),E=()=>r()+"."+c(),_=()=>(lStor.cid_v4||(lStor.cid_v4=E()),lStor.cid_v4),m=lStor.getItem("cid_v4"),v=()=>m?0[0]:enScroll==!0?0[0]:"1",p=()=>(sStor.sid||(sStor.sid=c()),sStor.sid),O=()=>{if(!sStor._ss)return sStor._ss="1",sStor._ss;if(sStor.getItem("_ss")=="1")return 0[0]},a="1",g=()=>{if(sStor.sct)if(enScroll==!0)return sStor.sct;else x=+sStor.getItem("sct")+ +a,sStor.sct=x;else sStor.sct=a;return sStor.sct},i=docLoc.search,b=new URLSearchParams(i),h=["q","s","search","query","keyword"],y=h.some(e=>i.includes("&"+e+"=")||i.includes("?"+e+"=")),u=()=>y==!0?"view_search_results":enScroll==!0?"scroll":enFdl==!0?"file_download":"page_view",f=()=>enScroll==!0?"90":0[0],C=()=>{if(u()=="view_search_results"){for(let e of b)if(h.includes(e[0]))return e[1]}else return 0[0]},d=encodeURIComponent,k=e=>{let t=[];for(let n in e)e.hasOwnProperty(n)&&e[n]!==0[0]&&t.push(d(n)+"="+d(e[n]));return t.join("&")},A=!1,S="https://liudon.com/analytics/post",M=k({tid:j,_p:F(),v:"2",sr:(s.width*w.devicePixelRatio+"x"+s.height*w.devicePixelRatio).toString(),ul:(nav.language||0[0]).toLowerCase(),cid:_(),_fv:v(),_s:"1",dl:docLoc.origin+docLoc.pathname+i,dt:doc.title||0[0],dr:doc.referrer||0[0],sid:p(),sct:g(),seg:"1",en:u(),"epn.percent_scrolled":f(),"ep.search_term":C(),"ep.file_extension":e||0[0],"ep.file_name":t||0[0],"ep.link_text":n||0[0],"ep.link_url":o||0[0],_ss:O(),_dbg:A?1:0[0]}),l=S+"?"+M;if(nav.sendBeacon)nav.sendBeacon(l);else{let e=new XMLHttpRequest;e.open("POST",l,!0)}}a();function sPr(){return(docEl.scrollTop||docBody.scrollTop)/((docEl.scrollHeight||docBody.scrollHeight)-docEl.clientHeight)*100}doc.addEventListener("scroll",sEv,{passive:!0});function sEv(){const e=sPr();if(e<90)return;enScroll=!0,a(),doc.removeEventListener("scroll",sEv,{passive:!0}),enScroll=!1}document.addEventListener("DOMContentLoaded",function(){let e=document.getElementsByTagName("a");for(let t=0;t<e.length;t++)if(e[t].getAttribute("href")!=null){const n=e[t].getAttribute("href"),s=n.substring(n.lastIndexOf("/")+1),o=s.split(".").pop();(e[t].hasAttribute("download")||extensions.includes(o))&&e[t].addEventListener("click",fDl,{passive:!0})}});function fDl(e){enFdl=!0;const t=e.currentTarget.getAttribute("href"),n=t.substring(t.lastIndexOf("/")+1),s=n.split(".").pop(),o=n.replace("."+s,""),i=e.currentTarget.text,r=t.replace(docLoc.origin,"");a(s,o,i,r),enFdl=!1}</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>