<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>æ­å»ºè‡ªæ‰˜ç®¡IPFS GatewayæœåŠ¡ï¼Œæ›¿ä»£Cloudflareçš„IPFS Gateway | æµåŠ¨</title><meta name=keywords content="cloudflare,ipfs"><meta name=description content="èƒŒæ™¯
4æœˆåº•çš„æ—¶å€™ï¼ŒLividå¤§ä½¬æé†’ï¼ŒCloudflareåº”è¯¥æ˜¯è°ƒæ•´äº†IPFS Gatewayç½‘å…³ç­–ç•¥ï¼Œæˆ‘çš„IPFSé•œåƒåšå®¢æ— æ³•è®¿é—®äº†ã€‚
æ²¡æŸ¥åˆ°Cloudflareçš„è°ƒæ•´è¯´æ˜ï¼Œä¸è¿‡è¿˜å¥½IPFSå®˜æ–¹ä¹Ÿæä¾›äº†å…¬å…±ç½‘å…³gateway.ipfs.ioï¼Œå°†åŸŸåè§£ææ”¹åˆ°å®˜ç½‘ç½‘å…³ã€‚"><meta name=author content="Liudon"><link rel=canonical href=https://liudon.com/posts/replacing-cloudflare-ipfs-gateway-with-self-hosted-gateway/><link crossorigin=anonymous href=../../assets/css/stylesheet.c2b4102602461aaea01497bf2f89d3d4096e9005f6ac8a7e60b27e335724b916.css integrity="sha256-wrQQJgJGGq6gFJe/L4nT1AlukAX2rIp+YLJ+M1ckuRY=" rel="preload stylesheet" as=style><link rel=icon href=https://liudon.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://liudon.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://liudon.com/favicon-32x32.png><link rel=apple-touch-icon href=https://liudon.com/apple-touch-icon.png><link rel=mask-icon href=https://liudon.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://liudon.com/posts/replacing-cloudflare-ipfs-gateway-with-self-hosted-gateway/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta name=google-site-verification content="rJrwFlRtYvRvSMxmD-zlGY6ozg6aDFMkfavno3ms5Ew"><meta name=google-adsense-account content="ca-pub-4739645989170648"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4739645989170648" crossorigin=anonymous></script><meta property="og:url" content="https://liudon.com/posts/replacing-cloudflare-ipfs-gateway-with-self-hosted-gateway/"><meta property="og:site_name" content="æµåŠ¨"><meta property="og:title" content="æ­å»ºè‡ªæ‰˜ç®¡IPFS GatewayæœåŠ¡ï¼Œæ›¿ä»£Cloudflareçš„IPFS Gateway"><meta property="og:description" content="èƒŒæ™¯ 4æœˆåº•çš„æ—¶å€™ï¼ŒLividå¤§ä½¬æé†’ï¼ŒCloudflareåº”è¯¥æ˜¯è°ƒæ•´äº†IPFS Gatewayç½‘å…³ç­–ç•¥ï¼Œæˆ‘çš„IPFSé•œåƒåšå®¢æ— æ³•è®¿é—®äº†ã€‚
æ²¡æŸ¥åˆ°Cloudflareçš„è°ƒæ•´è¯´æ˜ï¼Œä¸è¿‡è¿˜å¥½IPFSå®˜æ–¹ä¹Ÿæä¾›äº†å…¬å…±ç½‘å…³gateway.ipfs.ioï¼Œå°†åŸŸåè§£ææ”¹åˆ°å®˜ç½‘ç½‘å…³ã€‚"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-22T21:20:20+08:00"><meta property="article:modified_time" content="2024-05-22T21:20:20+08:00"><meta property="article:tag" content="Cloudflare"><meta property="article:tag" content="Ipfs"><meta name=twitter:card content="summary"><meta name=twitter:title content="æ­å»ºè‡ªæ‰˜ç®¡IPFS GatewayæœåŠ¡ï¼Œæ›¿ä»£Cloudflareçš„IPFS Gateway"><meta name=twitter:description content="èƒŒæ™¯
4æœˆåº•çš„æ—¶å€™ï¼ŒLividå¤§ä½¬æé†’ï¼ŒCloudflareåº”è¯¥æ˜¯è°ƒæ•´äº†IPFS Gatewayç½‘å…³ç­–ç•¥ï¼Œæˆ‘çš„IPFSé•œåƒåšå®¢æ— æ³•è®¿é—®äº†ã€‚
æ²¡æŸ¥åˆ°Cloudflareçš„è°ƒæ•´è¯´æ˜ï¼Œä¸è¿‡è¿˜å¥½IPFSå®˜æ–¹ä¹Ÿæä¾›äº†å…¬å…±ç½‘å…³gateway.ipfs.ioï¼Œå°†åŸŸåè§£ææ”¹åˆ°å®˜ç½‘ç½‘å…³ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ–‡ç« ","item":"https://liudon.com/posts/"},{"@type":"ListItem","position":2,"name":"æ­å»ºè‡ªæ‰˜ç®¡IPFS GatewayæœåŠ¡ï¼Œæ›¿ä»£Cloudflareçš„IPFS Gateway","item":"https://liudon.com/posts/replacing-cloudflare-ipfs-gateway-with-self-hosted-gateway/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"æ­å»ºè‡ªæ‰˜ç®¡IPFS GatewayæœåŠ¡ï¼Œæ›¿ä»£Cloudflareçš„IPFS Gateway","name":"æ­å»ºè‡ªæ‰˜ç®¡IPFS GatewayæœåŠ¡ï¼Œæ›¿ä»£Cloudflareçš„IPFS Gateway","description":"èƒŒæ™¯ 4æœˆåº•çš„æ—¶å€™ï¼ŒLividå¤§ä½¬æé†’ï¼ŒCloudflareåº”è¯¥æ˜¯è°ƒæ•´äº†IPFS Gatewayç½‘å…³ç­–ç•¥ï¼Œæˆ‘çš„IPFSé•œåƒåšå®¢æ— æ³•è®¿é—®äº†ã€‚\næ²¡æŸ¥åˆ°Cloudflareçš„è°ƒæ•´è¯´æ˜ï¼Œä¸è¿‡è¿˜å¥½IPFSå®˜æ–¹ä¹Ÿæä¾›äº†å…¬å…±ç½‘å…³gateway.ipfs.ioï¼Œå°†åŸŸåè§£ææ”¹åˆ°å®˜ç½‘ç½‘å…³ã€‚\n","keywords":["cloudflare","ipfs"],"articleBody":"èƒŒæ™¯ 4æœˆåº•çš„æ—¶å€™ï¼ŒLividå¤§ä½¬æé†’ï¼ŒCloudflareåº”è¯¥æ˜¯è°ƒæ•´äº†IPFS Gatewayç½‘å…³ç­–ç•¥ï¼Œæˆ‘çš„IPFSé•œåƒåšå®¢æ— æ³•è®¿é—®äº†ã€‚\næ²¡æŸ¥åˆ°Cloudflareçš„è°ƒæ•´è¯´æ˜ï¼Œä¸è¿‡è¿˜å¥½IPFSå®˜æ–¹ä¹Ÿæä¾›äº†å…¬å…±ç½‘å…³gateway.ipfs.ioï¼Œå°†åŸŸåè§£ææ”¹åˆ°å®˜ç½‘ç½‘å…³ã€‚\nä½†è¿˜æ˜¯æ— æ³•è®¿é—®ï¼Œè¢«Cloudflareæ‹¦æˆªäº†ã€‚\nError 1014 Ray ID: 887cc7fcfa2804bb â€¢ 2024-05-22 12:24:05 UTC CNAME Cross-User Banned What happened? You've requested a page on a website that is part of the Cloudflare network. The host is configured as a CNAME across accounts on Cloudflare, which is not allowed by Cloudflare's security policy. What can I do? If this is an R2 custom domain, it may still be initializing. If you have attempted to manually point a CNAME DNS record to your R2 bucket, you must do it using a custom domain. Refer to R2's documentation for details. Visit our website to learn more about Cloudflare. è¿™å‘¨åœ¨Discordç¾¤é‡Œï¼Œçœ‹åˆ°æœ‰äººå‘æ¶ˆæ¯ï¼Œè¯´æ˜¯Cloudflareå°†ä¸‹çº¿IPFS Gatewayç½‘å…³æœåŠ¡ã€‚\nhttps://blog.cloudflare.com/cloudflares-public-ipfs-gateways-and-supporting-interplanetary-shipyard\nAll traffic using the cloudflare-ipfs.com or cf-ipfs.com hostname(s) will continue to work without interruption and be redirected to ipfs.io or dweb.link until August 14th, 2024, at which time the Cloudflare hostnames will no longer connect to IPFS and all users must switch the hostname they use to ipfs.io or dweb.link to ensure no service interruption takes place. If you are using either of the Cloudflare hostnames, please be sure to switch to one of the new ones as soon as possible ahead of the transition date to avoid any service interruptions!\næ–¹æ¡ˆè°ƒç ” ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œæ‰¾åˆ°äº†ä¸€ç¯‡è‡ªå»ºIPFS Gatewayç½‘å…³çš„èµ„æ–™ï¼Œé‡Œé¢ç”¨åˆ°äº†bifrost-gatewayç»„ä»¶ã€‚\nTo run against a compatible, local trustless gateway provided by Kubo or IPFS Desktop: $ PROXY_GATEWAY_URL=\"http://127.0.0.1:8080\" ./bifrost-gateway çœ‹æ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤æ­å»ºä¸€ä¸ªè‡ªå·±çš„ç½‘å…³æœåŠ¡ï¼ŒåŒæ—¶æ”¯æŒDNSLinkæ–¹å¼è®¿é—®ã€‚\nå¤ªæ£’äº†ï¼Œæ„Ÿè§‰å¯ä»¥è‡ªå·±æ­ä¸€å¥—ç½‘å…³ï¼Œç„¶åç”¨Nginxåä»£å¯¹å¤–æä¾›æœåŠ¡ã€‚\nåœ¨ä¹‹å‰å°†åšå®¢éƒ¨ç½²åˆ°æ˜Ÿé™…æ–‡ä»¶ç³»ç»Ÿ(IPFS)æ–‡ç« ä¸­ï¼Œå·²ç»é€šè¿‡Kuboæ­å»ºäº†ä¸€å¥—æœ¬åœ°IPFSæœåŠ¡ã€‚\nä¸Šæœºå™¨éªŒè¯ä¸€ä¸‹å¯è¡Œæ€§ï¼š\nå¯åŠ¨Bifrost Gatewayï¼Œç½‘å…³é»˜è®¤åœ°å€ä¸ºhttps://127.0.0.1:8081\n$ PROXY_GATEWAY_URL=\"http://127.0.0.1:8080\" ./bifrost-gateway 2024/05/22 20:54:00 Starting bifrost-gateway dev-build 2024/05/22 20:54:00 Proxy backend (PROXY_GATEWAY_URL) at http://127.0.0.1:8080 2024/05/22 20:54:00 BLOCK_CACHE_SIZE: 1024 2024/05/22 20:54:00 GRAPH_BACKEND: false 2024/05/22 20:54:00 Legacy RPC at /api/v0 (KUBO_RPC_URL) provided by http://127.0.0.1:5001 2024/05/22 20:54:00 Path gateway listening on http://127.0.0.1:8081 2024/05/22 20:54:00 Smoke test (JPG): http://127.0.0.1:8081/ipfs/bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi 2024/05/22 20:54:00 Subdomain gateway configured on dweb.link and http://localhost:8081 2024/05/22 20:54:00 Smoke test (Subdomain+DNSLink+UnixFS+HAMT): http://localhost:8081/ipns/en.wikipedia-on-ipfs.org/wiki/ 2024/05/22 20:54:00 Metrics exposed at http://127.0.0.1:8041/debug/metrics/prometheus åœ¨å¦å¤–ä¸€ä¸ªç»ˆç«¯ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤\n$ curl 'http://127.0.0.1:8081/' -H\"Host:liudon.xyz\" -I HTTP/1.1 200 OK Accept-Ranges: bytes Access-Control-Allow-Headers: Content-Type Access-Control-Allow-Headers: Range Access-Control-Allow-Headers: User-Agent Access-Control-Allow-Headers: X-Requested-With Access-Control-Allow-Methods: GET Access-Control-Allow-Methods: HEAD Access-Control-Allow-Methods: OPTIONS Access-Control-Allow-Origin: * Access-Control-Expose-Headers: Content-Length Access-Control-Expose-Headers: Content-Range Access-Control-Expose-Headers: X-Chunked-Output Access-Control-Expose-Headers: X-Ipfs-Path Access-Control-Expose-Headers: X-Ipfs-Roots Access-Control-Expose-Headers: X-Stream-Output Content-Length: 26283 Content-Type: text/html Etag: \"QmebCXeD6XDB9xsVvX5Te91EeF5t7sk65A3adsLQ9bostj\" Last-Modified: Wed, 22 May 2024 12:57:29 GMT X-Ipfs-Path: /ipns/liudon.xyz/ X-Ipfs-Roots: QmebCXeD6XDB9xsVvX5Te91EeF5t7sk65A3adsLQ9bostj Date: Wed, 22 May 2024 12:57:29 GMT éªŒè¯å¯è¡Œï¼Œä¸è¿‡æˆ‘è®°å¾—Kuboé»˜è®¤å°±æœ‰ç½‘å…³æœåŠ¡çš„ï¼Œè¯•ä¸€ä¸‹ç›´æ¥é€šè¿‡Kuboé»˜è®¤ç½‘å…³çš„æƒ…å†µã€‚\nKuboé»˜è®¤ç½‘å…³åœ°å€ä¸ºhttp://127.0.0.1:8080ï¼Œæ³¨æ„ä¸è¦å¯¹å¤–ç½‘æä¾›8080ç«¯å£è®¿é—®ï¼Œå¦åˆ™ä¼šè¢«åˆ«äººå½“æˆå…¬å…±ç½‘å…³ä½¿ç”¨\n$ curl 'http://127.0.0.1:8080/' -H\"Host:liudon.xyz\" -I HTTP/1.1 200 OK Accept-Ranges: bytes Access-Control-Allow-Headers: Content-Type Access-Control-Allow-Headers: Range Access-Control-Allow-Headers: User-Agent Access-Control-Allow-Headers: X-Requested-With Access-Control-Allow-Methods: GET Access-Control-Allow-Origin: * Access-Control-Expose-Headers: Content-Length Access-Control-Expose-Headers: Content-Range Access-Control-Expose-Headers: X-Chunked-Output Access-Control-Expose-Headers: X-Ipfs-Path Access-Control-Expose-Headers: X-Ipfs-Roots Access-Control-Expose-Headers: X-Stream-Output Content-Length: 26283 Content-Type: text/html Etag: \"QmebCXeD6XDB9xsVvX5Te91EeF5t7sk65A3adsLQ9bostj\" Last-Modified: Wed, 22 May 2024 12:59:25 GMT X-Ipfs-Path: /ipns/liudon.xyz/ X-Ipfs-Roots: QmebCXeD6XDB9xsVvX5Te91EeF5t7sk65A3adsLQ9bostj Date: Wed, 22 May 2024 12:59:25 GMT ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œé‚£å°±æ²¡å¿…è¦å¤šæä¸€å¥—bifrostç½‘å…³äº†ã€‚\nå…·ä½“å®ç° é€šè¿‡Nginxåå‘ä»£ç†è½¬å‘åˆ°æœ¬åœ°IPFSç½‘å…³ï¼Œåªéœ€è¦æ”¹ä¸€ä¸‹è§£æå°±å¯ä»¥ç»§ç»­ä½¿ç”¨IPFSæœåŠ¡äº†ã€‚\nNginxåå‘ä»£ç† server { listen 443 ssl http2; server_name liudon.xyz; ssl_certificate /etc/nginx/ssl/liudon.xyz/fullchain.cer; ssl_certificate_key /etc/nginx/ssl/liudon.xyz/liudon.xyz.key; ssl_protocols TLSv1.2 TLSv1.3; ssl_ciphers 'TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384'; ssl_prefer_server_ciphers on; ssl_session_cache shared:SSL:10m; ssl_session_timeout 10m; location / { proxy_pass http://127.0.0.1:8080; proxy_set_header Host $host; // æ³¨æ„è¿™é‡Œè¦ä¼ é€’åä»£çš„åŸŸåä¿¡æ¯ï¼Œé™åˆ¶åªèƒ½è®¿é—®æˆ‘ä»¬è‡ªå·±dnslinkå¯¹åº”çš„èµ„æº } access_log /var/log/nginx/liudon.xyz.access.log; error_log /var/log/nginx/liudon.xyz.error.log; } ç”³è¯·Let's Encryptè¯ä¹¦ï¼Œè¯ä¹¦ç›¸å…³çš„å°±ä¸å¤šåšä»‹ç»äº†ï¼Œç½‘ä¸Šèµ„æ–™å¾ˆå¤šã€‚\næ›´æ”¹DNSè§£æ åŸæœ‰çš„è§£æ ç±»å‹ï¼šCNAME åç§°ï¼šliudon.xyz å†…å®¹ï¼šcloudflare-ipfs.com æ–°çš„è§£æ ç±»å‹ï¼šA åç§°ï¼šliudon.xyz å†…å®¹ï¼šä½ çš„æœåŠ¡å™¨å…¬ç½‘IP æå®šï¼Œåˆå¯ä»¥ç»§ç»­ç™½å«–IPFSæœåŠ¡äº†ã€‚\n","wordCount":"1262","inLanguage":"en","datePublished":"2024-05-22T21:20:20+08:00","dateModified":"2024-05-22T21:20:20+08:00","author":{"@type":"Person","name":"Liudon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://liudon.com/posts/replacing-cloudflare-ipfs-gateway-with-self-hosted-gateway/"},"publisher":{"@type":"Organization","name":"æµåŠ¨","logo":{"@type":"ImageObject","url":"https://liudon.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://liudon.com/ accesskey=h title="æµåŠ¨ (Alt + H)">æµåŠ¨</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://liudon.com/ title=Home><span>Home</span></a></li><li><a href=https://liudon.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://workout.liudon.com title=Workouts><span>Workouts</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://liudon.com/about/ title=About><span>About</span></a></li><li><a href=https://liudon.com/search/ title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">æ­å»ºè‡ªæ‰˜ç®¡IPFS GatewayæœåŠ¡ï¼Œæ›¿ä»£Cloudflareçš„IPFS Gateway</h1><div class=post-meta><span title='2024-05-22 21:20:20 +0800 +0800'>2024-05-22</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;1262 words&nbsp;Â·&nbsp;Liudon</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e8%83%8c%e6%99%af aria-label=èƒŒæ™¯>èƒŒæ™¯</a></li><li><a href=#%e6%96%b9%e6%a1%88%e8%b0%83%e7%a0%94 aria-label=æ–¹æ¡ˆè°ƒç ”>æ–¹æ¡ˆè°ƒç ”</a></li><li><a href=#%e5%85%b7%e4%bd%93%e5%ae%9e%e7%8e%b0 aria-label=å…·ä½“å®ç°>å…·ä½“å®ç°</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h4 id=èƒŒæ™¯>èƒŒæ™¯<a hidden class=anchor aria-hidden=true href=#èƒŒæ™¯>#</a></h4><p>4æœˆåº•çš„æ—¶å€™ï¼ŒLividå¤§ä½¬æé†’ï¼Œ<code>Cloudflare</code>åº”è¯¥æ˜¯è°ƒæ•´äº†<code>IPFS Gateway</code>ç½‘å…³ç­–ç•¥ï¼Œæˆ‘çš„<a href=https://liudon.xyz>IPFSé•œåƒåšå®¢</a>æ— æ³•è®¿é—®äº†ã€‚</p><p>æ²¡æŸ¥åˆ°<code>Cloudflare</code>çš„è°ƒæ•´è¯´æ˜ï¼Œä¸è¿‡è¿˜å¥½<code>IPFS</code>å®˜æ–¹ä¹Ÿæä¾›äº†å…¬å…±ç½‘å…³<code>gateway.ipfs.io</code>ï¼Œå°†åŸŸåè§£ææ”¹åˆ°å®˜ç½‘ç½‘å…³ã€‚</p><p>ä½†è¿˜æ˜¯æ— æ³•è®¿é—®ï¼Œè¢«<code>Cloudflare</code>æ‹¦æˆªäº†ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Error 1014 Ray ID: 887cc7fcfa2804bb â€¢ 2024-05-22 12:24:05 UTC
</span></span><span style=display:flex><span>CNAME Cross-User Banned
</span></span><span style=display:flex><span>What happened?
</span></span><span style=display:flex><span>You&#39;ve requested a page on a website that is part of the Cloudflare network. The host is configured as a CNAME across accounts on Cloudflare, which is not allowed by Cloudflare&#39;s security policy.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>What can I do?
</span></span><span style=display:flex><span>If this is an R2 custom domain, it may still be initializing. If you have attempted to manually point a CNAME DNS record to your R2 bucket, you must do it using a custom domain. Refer to R2&#39;s documentation for details.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Visit our website to learn more about Cloudflare.
</span></span></code></pre></div><p>è¿™å‘¨åœ¨Discordç¾¤é‡Œï¼Œçœ‹åˆ°æœ‰äººå‘æ¶ˆæ¯ï¼Œè¯´æ˜¯<code>Cloudflare</code>å°†ä¸‹çº¿<code>IPFS Gateway</code>ç½‘å…³æœåŠ¡ã€‚</p><p><a href=https://blog.cloudflare.com/cloudflares-public-ipfs-gateways-and-supporting-interplanetary-shipyard>https://blog.cloudflare.com/cloudflares-public-ipfs-gateways-and-supporting-interplanetary-shipyard</a></p><blockquote><p>All traffic using the cloudflare-ipfs.com or cf-ipfs.com hostname(s) will continue to work without interruption and be redirected to ipfs.io or dweb.link until August 14th, 2024, at which time the Cloudflare hostnames will no longer connect to IPFS and all users must switch the hostname they use to ipfs.io or dweb.link to ensure no service interruption takes place. If you are using either of the Cloudflare hostnames, please be sure to switch to one of the new ones as soon as possible ahead of the transition date to avoid any service interruptions!</p></blockquote><h4 id=æ–¹æ¡ˆè°ƒç ”>æ–¹æ¡ˆè°ƒç ”<a hidden class=anchor aria-hidden=true href=#æ–¹æ¡ˆè°ƒç ”>#</a></h4><p>ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œæ‰¾åˆ°äº†ä¸€ç¯‡<a href=https://railway.app/template/PhPjgz>è‡ªå»ºIPFS Gatewayç½‘å…³çš„èµ„æ–™</a>ï¼Œé‡Œé¢ç”¨åˆ°äº†<a href=https://github.com/ipfs/bifrost-gateway>bifrost-gateway</a>ç»„ä»¶ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>To run against a compatible, local trustless gateway provided by Kubo or IPFS Desktop:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ PROXY_GATEWAY_URL=&#34;http://127.0.0.1:8080&#34; ./bifrost-gateway
</span></span></code></pre></div><p>çœ‹æ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤æ­å»ºä¸€ä¸ªè‡ªå·±çš„ç½‘å…³æœåŠ¡ï¼ŒåŒæ—¶æ”¯æŒ<code>DNSLink</code>æ–¹å¼è®¿é—®ã€‚</p><p>å¤ªæ£’äº†ï¼Œæ„Ÿè§‰å¯ä»¥è‡ªå·±æ­ä¸€å¥—ç½‘å…³ï¼Œç„¶åç”¨<code>Nginx</code>åä»£å¯¹å¤–æä¾›æœåŠ¡ã€‚</p><p>åœ¨ä¹‹å‰<a href=https://liudon.com/posts/deploy-blog-to-ipfs/>å°†åšå®¢éƒ¨ç½²åˆ°æ˜Ÿé™…æ–‡ä»¶ç³»ç»Ÿ(IPFS)</a>æ–‡ç« ä¸­ï¼Œå·²ç»é€šè¿‡<code>Kubo</code>æ­å»ºäº†ä¸€å¥—æœ¬åœ°<code>IPFS</code>æœåŠ¡ã€‚</p><p>ä¸Šæœºå™¨éªŒè¯ä¸€ä¸‹å¯è¡Œæ€§ï¼š</p><ol><li><p>å¯åŠ¨Bifrost Gatewayï¼Œç½‘å…³é»˜è®¤åœ°å€ä¸º<code>https://127.0.0.1:8081</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>$ PROXY_GATEWAY_URL=&#34;http://127.0.0.1:8080&#34; ./bifrost-gateway
</span></span><span style=display:flex><span>2024/05/22 20:54:00 Starting bifrost-gateway dev-build
</span></span><span style=display:flex><span>2024/05/22 20:54:00 Proxy backend (PROXY_GATEWAY_URL) at http://127.0.0.1:8080
</span></span><span style=display:flex><span>2024/05/22 20:54:00 BLOCK_CACHE_SIZE: 1024
</span></span><span style=display:flex><span>2024/05/22 20:54:00 GRAPH_BACKEND: false
</span></span><span style=display:flex><span>2024/05/22 20:54:00 Legacy RPC at /api/v0 (KUBO_RPC_URL) provided by http://127.0.0.1:5001
</span></span><span style=display:flex><span>2024/05/22 20:54:00 Path gateway listening on http://127.0.0.1:8081
</span></span><span style=display:flex><span>2024/05/22 20:54:00   Smoke test (JPG): http://127.0.0.1:8081/ipfs/bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi
</span></span><span style=display:flex><span>2024/05/22 20:54:00 Subdomain gateway configured on dweb.link and http://localhost:8081
</span></span><span style=display:flex><span>2024/05/22 20:54:00   Smoke test (Subdomain+DNSLink+UnixFS+HAMT): http://localhost:8081/ipns/en.wikipedia-on-ipfs.org/wiki/
</span></span><span style=display:flex><span>2024/05/22 20:54:00 Metrics exposed at http://127.0.0.1:8041/debug/metrics/prometheus
</span></span></code></pre></div></li><li><p>åœ¨å¦å¤–ä¸€ä¸ªç»ˆç«¯ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>$ curl &#39;http://127.0.0.1:8081/&#39; -H&#34;Host:liudon.xyz&#34; -I
</span></span><span style=display:flex><span>HTTP/1.1 200 OK
</span></span><span style=display:flex><span>Accept-Ranges: bytes
</span></span><span style=display:flex><span>Access-Control-Allow-Headers: Content-Type
</span></span><span style=display:flex><span>Access-Control-Allow-Headers: Range
</span></span><span style=display:flex><span>Access-Control-Allow-Headers: User-Agent
</span></span><span style=display:flex><span>Access-Control-Allow-Headers: X-Requested-With
</span></span><span style=display:flex><span>Access-Control-Allow-Methods: GET
</span></span><span style=display:flex><span>Access-Control-Allow-Methods: HEAD
</span></span><span style=display:flex><span>Access-Control-Allow-Methods: OPTIONS
</span></span><span style=display:flex><span>Access-Control-Allow-Origin: *
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: Content-Length
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: Content-Range
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: X-Chunked-Output
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: X-Ipfs-Path
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: X-Ipfs-Roots
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: X-Stream-Output
</span></span><span style=display:flex><span>Content-Length: 26283
</span></span><span style=display:flex><span>Content-Type: text/html
</span></span><span style=display:flex><span>Etag: &#34;QmebCXeD6XDB9xsVvX5Te91EeF5t7sk65A3adsLQ9bostj&#34;
</span></span><span style=display:flex><span>Last-Modified: Wed, 22 May 2024 12:57:29 GMT
</span></span><span style=display:flex><span>X-Ipfs-Path: /ipns/liudon.xyz/
</span></span><span style=display:flex><span>X-Ipfs-Roots: QmebCXeD6XDB9xsVvX5Te91EeF5t7sk65A3adsLQ9bostj
</span></span><span style=display:flex><span>Date: Wed, 22 May 2024 12:57:29 GMT
</span></span></code></pre></div></li></ol><p>éªŒè¯å¯è¡Œï¼Œä¸è¿‡æˆ‘è®°å¾—<code>Kubo</code>é»˜è®¤å°±æœ‰ç½‘å…³æœåŠ¡çš„ï¼Œè¯•ä¸€ä¸‹ç›´æ¥é€šè¿‡<code>Kubo</code>é»˜è®¤ç½‘å…³çš„æƒ…å†µã€‚</p><p><em>Kuboé»˜è®¤ç½‘å…³åœ°å€ä¸ºhttp://127.0.0.1:8080ï¼Œæ³¨æ„ä¸è¦å¯¹å¤–ç½‘æä¾›8080ç«¯å£è®¿é—®ï¼Œå¦åˆ™ä¼šè¢«åˆ«äººå½“æˆå…¬å…±ç½‘å…³ä½¿ç”¨</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>$ curl &#39;http://127.0.0.1:8080/&#39; -H&#34;Host:liudon.xyz&#34; -I
</span></span><span style=display:flex><span>HTTP/1.1 200 OK
</span></span><span style=display:flex><span>Accept-Ranges: bytes
</span></span><span style=display:flex><span>Access-Control-Allow-Headers: Content-Type
</span></span><span style=display:flex><span>Access-Control-Allow-Headers: Range
</span></span><span style=display:flex><span>Access-Control-Allow-Headers: User-Agent
</span></span><span style=display:flex><span>Access-Control-Allow-Headers: X-Requested-With
</span></span><span style=display:flex><span>Access-Control-Allow-Methods: GET
</span></span><span style=display:flex><span>Access-Control-Allow-Origin: *
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: Content-Length
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: Content-Range
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: X-Chunked-Output
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: X-Ipfs-Path
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: X-Ipfs-Roots
</span></span><span style=display:flex><span>Access-Control-Expose-Headers: X-Stream-Output
</span></span><span style=display:flex><span>Content-Length: 26283
</span></span><span style=display:flex><span>Content-Type: text/html
</span></span><span style=display:flex><span>Etag: &#34;QmebCXeD6XDB9xsVvX5Te91EeF5t7sk65A3adsLQ9bostj&#34;
</span></span><span style=display:flex><span>Last-Modified: Wed, 22 May 2024 12:59:25 GMT
</span></span><span style=display:flex><span>X-Ipfs-Path: /ipns/liudon.xyz/
</span></span><span style=display:flex><span>X-Ipfs-Roots: QmebCXeD6XDB9xsVvX5Te91EeF5t7sk65A3adsLQ9bostj
</span></span><span style=display:flex><span>Date: Wed, 22 May 2024 12:59:25 GMT
</span></span></code></pre></div><p>ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œé‚£å°±æ²¡å¿…è¦å¤šæä¸€å¥—bifrostç½‘å…³äº†ã€‚</p><h4 id=å…·ä½“å®ç°>å…·ä½“å®ç°<a hidden class=anchor aria-hidden=true href=#å…·ä½“å®ç°>#</a></h4><p>é€šè¿‡<code>Nginx</code>åå‘ä»£ç†è½¬å‘åˆ°æœ¬åœ°<code>IPFS</code>ç½‘å…³ï¼Œåªéœ€è¦æ”¹ä¸€ä¸‹è§£æå°±å¯ä»¥ç»§ç»­ä½¿ç”¨<code>IPFS</code>æœåŠ¡äº†ã€‚</p><p><picture><source type=image/avif srcset="https://liudon.com/posts/replacing-cloudflare-ipfs-gateway-with-self-hosted-gateway/20240522210154.png_1080x.avif 1080w" sizes="(min-width: 768px) 1080px, 100vw"><source type=image/webp srcset="https://liudon.com/posts/replacing-cloudflare-ipfs-gateway-with-self-hosted-gateway/20240522210154.png_1080x.webp 1080w" sizes="(min-width: 768px) 1080px, 100vw"><img src=20240522210154.png width=904 height=1040 alt=æ–¹æ¡ˆ title loading=lazy></picture></p><ol><li><code>Nginx</code>åå‘ä»£ç†</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>server {
</span></span><span style=display:flex><span>    listen <span style=color:#ae81ff>443</span> ssl http2;
</span></span><span style=display:flex><span>    server_name liudon<span style=color:#f92672>.</span>xyz;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ssl_certificate <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>nginx<span style=color:#f92672>/</span>ssl<span style=color:#f92672>/</span>liudon<span style=color:#f92672>.</span>xyz<span style=color:#f92672>/</span>fullchain<span style=color:#f92672>.</span>cer;
</span></span><span style=display:flex><span>    ssl_certificate_key <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>nginx<span style=color:#f92672>/</span>ssl<span style=color:#f92672>/</span>liudon<span style=color:#f92672>.</span>xyz<span style=color:#f92672>/</span>liudon<span style=color:#f92672>.</span>xyz<span style=color:#f92672>.</span>key;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ssl_protocols TLSv1<span style=color:#f92672>.</span><span style=color:#ae81ff>2</span> TLSv1<span style=color:#f92672>.</span><span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>    ssl_ciphers <span style=color:#e6db74>&#39;TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384&#39;</span>;
</span></span><span style=display:flex><span>    ssl_prefer_server_ciphers on;
</span></span><span style=display:flex><span>    ssl_session_cache shared:SSL:<span style=color:#ae81ff>10</span>m;
</span></span><span style=display:flex><span>    ssl_session_timeout <span style=color:#ae81ff>10</span>m;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    location <span style=color:#f92672>/</span> {
</span></span><span style=display:flex><span>            proxy_pass http:<span style=color:#f92672>//</span><span style=color:#ae81ff>127.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.1</span>:<span style=color:#ae81ff>8080</span>;
</span></span><span style=display:flex><span>            proxy_set_header Host <span style=color:#f92672>$</span>host; <span style=color:#f92672>//</span> <span style=color:#960050;background-color:#1e0010>æ³¨æ„è¿™é‡Œè¦ä¼ é€’åä»£çš„åŸŸåä¿¡æ¯ï¼Œé™åˆ¶åªèƒ½è®¿é—®æˆ‘ä»¬è‡ªå·±</span>dnslinkå¯¹åº”çš„èµ„æº
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    access_log <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>nginx<span style=color:#f92672>/</span>liudon<span style=color:#f92672>.</span>xyz<span style=color:#f92672>.</span>access<span style=color:#f92672>.</span>log;
</span></span><span style=display:flex><span>    error_log <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>nginx<span style=color:#f92672>/</span>liudon<span style=color:#f92672>.</span>xyz<span style=color:#f92672>.</span>error<span style=color:#f92672>.</span>log;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ç”³è¯·<code>Let's Encrypt</code>è¯ä¹¦ï¼Œè¯ä¹¦ç›¸å…³çš„å°±ä¸å¤šåšä»‹ç»äº†ï¼Œç½‘ä¸Šèµ„æ–™å¾ˆå¤šã€‚</p><ol start=2><li>æ›´æ”¹DNSè§£æ</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>åŸæœ‰çš„è§£æ
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ç±»å‹ï¼šCNAME
</span></span><span style=display:flex><span>åç§°ï¼šliudon.xyz
</span></span><span style=display:flex><span>å†…å®¹ï¼šcloudflare-ipfs.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>æ–°çš„è§£æ
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ç±»å‹ï¼šA
</span></span><span style=display:flex><span>åç§°ï¼šliudon.xyz
</span></span><span style=display:flex><span>å†…å®¹ï¼šä½ çš„æœåŠ¡å™¨å…¬ç½‘IP
</span></span></code></pre></div><p>æå®šï¼Œåˆå¯ä»¥ç»§ç»­ç™½å«–<code>IPFS</code>æœåŠ¡äº†ã€‚</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://liudon.com/tags/cloudflare/>Cloudflare</a></li><li><a href=https://liudon.com/tags/ipfs/>Ipfs</a></li></ul><nav class=paginav><a class=prev href=https://liudon.com/posts/solving-undeclared-name-any-requires-version-go1.18-or-later-compilation-error/><span class=title>Â« Prev</span><br><span>è§£å†³ "undeclared name: any (requires version go1.18 or later)" ç¼–è¯‘é”™è¯¯</span>
</a><a class=next href=https://liudon.com/posts/the-cors-issue-with-302-redirect/><span class=title>Next Â»</span><br><span>302è·³è½¬çš„è·¨åŸŸé—®é¢˜(CORS)</span></a></nav></footer><div><div class=post_ads><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-4739645989170648 data-ad-slot=5019102040 data-ad-format=auto data-full-width-responsive=true></ins><script>window.addEventListener("load",function(){(adsbygoogle=window.adsbygoogle||[]).push({})})</script></div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>ğŸ’¬è¯„è®º</span><hr></div><div id=tcomment></div><script src=https://cdnjs.cloudflare.com/ajax/libs/twikoo/1.6.41/twikoo.all.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script>twikoo.init({envId:"https://comment.liudon.com",el:"#tcomment",lang:"zh-CN",region:"ap-shanghai",path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://liudon.com/>æµåŠ¨</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer style=margin-top:-20px;padding-top:0><span><a href=https://beian.miit.gov.cn target=_blank>äº¬ICPå¤‡13029522å·-2</a></span></footer><script src=//tokinx.github.io/ViewImage/view-image.min.js async></script><script>function initViewImage(){window.ViewImage&&ViewImage.init(".post-content img")}document.readyState==="complete"?initViewImage():window.addEventListener("load",initViewImage)</script><script>const host=window.location.host;host!=="blog.liudon.xyz"&&!host.startsWith("liudon.")&&!host.startsWith("localhost")&&!host.startsWith("127.0.0.1")&&(document.body.innerHTML=['<div style="margin: auto;">',"<h1>å½“å‰é¡µé¢å¹¶éæœ¬äººåšå®¢ï¼Œå³å°†åœ¨2ç§’åè·³è½¬åˆ°æœ¬äººåšå®¢: https://liudon.comã€‚</h1>","<br />","</div>"].join(""),document.body.style=["background-color: white;","color: black;","text-align: center;","font-size: 50px;","width: 100vw;","height: 100vh;","display: flex;"].join(""),setTimeout(()=>{window.location.href="https://liudon.com"},2e3))</script><script>enScroll=!1,enFdl=!1,extCurrent=0[0],filename=0[0],targetText=0[0],splitOrigin=0[0];const lStor=localStorage,sStor=sessionStorage,doc=document,docEl=document.documentElement,docBody=document.body,docLoc=document.location,w=window,s=screen,nav=navigator||{},extensions=["pdf","xls","xlsx","doc","docx","txt","rtf","csv","exe","key","pps","ppt","pptx","7z","pkg","rar","gz","zip","avi","mov","mp4","mpe","mpeg","wmv","mid","midi","mp3","wav","wma"];function a(e,t,n,o){const j="G-G9ZDJQN9E2",r=()=>Math.floor(Math.random()*1e9)+1,c=()=>Math.floor(Date.now()/1e3),F=()=>(sStor._p||(sStor._p=r()),sStor._p),E=()=>r()+"."+c(),_=()=>(lStor.cid_v4||(lStor.cid_v4=E()),lStor.cid_v4),m=lStor.getItem("cid_v4"),v=()=>m?0[0]:enScroll==!0?0[0]:"1",p=()=>(sStor.sid||(sStor.sid=c()),sStor.sid),O=()=>{if(!sStor._ss)return sStor._ss="1",sStor._ss;if(sStor.getItem("_ss")=="1")return 0[0]},a="1",g=()=>{if(sStor.sct)if(enScroll==!0)return sStor.sct;else x=+sStor.getItem("sct")+ +a,sStor.sct=x;else sStor.sct=a;return sStor.sct},i=docLoc.search,b=new URLSearchParams(i),h=["q","s","search","query","keyword"],y=h.some(e=>i.includes("&"+e+"=")||i.includes("?"+e+"=")),u=()=>y==!0?"view_search_results":enScroll==!0?"scroll":enFdl==!0?"file_download":"page_view",f=()=>enScroll==!0?"90":0[0],C=()=>{if(u()=="view_search_results"){for(let e of b)if(h.includes(e[0]))return e[1]}else return 0[0]},d=encodeURIComponent,k=e=>{let t=[];for(let n in e)e.hasOwnProperty(n)&&e[n]!==0[0]&&t.push(d(n)+"="+d(e[n]));return t.join("&")},A=!1,S="https://liudon.com/analytics/post",M=k({tid:j,_p:F(),v:"2",sr:(s.width*w.devicePixelRatio+"x"+s.height*w.devicePixelRatio).toString(),ul:(nav.language||0[0]).toLowerCase(),cid:_(),_fv:v(),_s:"1",dl:docLoc.origin+docLoc.pathname+i,dt:doc.title||0[0],dr:doc.referrer||0[0],sid:p(),sct:g(),seg:"1",en:u(),"epn.percent_scrolled":f(),"ep.search_term":C(),"ep.file_extension":e||0[0],"ep.file_name":t||0[0],"ep.link_text":n||0[0],"ep.link_url":o||0[0],_ss:O(),_dbg:A?1:0[0]}),l=S+"?"+M;if(nav.sendBeacon)nav.sendBeacon(l);else{let e=new XMLHttpRequest;e.open("POST",l,!0)}}a();function sPr(){return(docEl.scrollTop||docBody.scrollTop)/((docEl.scrollHeight||docBody.scrollHeight)-docEl.clientHeight)*100}doc.addEventListener("scroll",sEv,{passive:!0});function sEv(){const e=sPr();if(e<90)return;enScroll=!0,a(),doc.removeEventListener("scroll",sEv,{passive:!0}),enScroll=!1}document.addEventListener("DOMContentLoaded",function(){let e=document.getElementsByTagName("a");for(let t=0;t<e.length;t++)if(e[t].getAttribute("href")!=null){const n=e[t].getAttribute("href"),s=n.substring(n.lastIndexOf("/")+1),o=s.split(".").pop();(e[t].hasAttribute("download")||extensions.includes(o))&&e[t].addEventListener("click",fDl,{passive:!0})}});function fDl(e){enFdl=!0;const t=e.currentTarget.getAttribute("href"),n=t.substring(t.lastIndexOf("/")+1),s=n.split(".").pop(),o=n.replace("."+s,""),i=e.currentTarget.text,r=t.replace(docLoc.origin,"");a(s,o,i,r),enFdl=!1}</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>